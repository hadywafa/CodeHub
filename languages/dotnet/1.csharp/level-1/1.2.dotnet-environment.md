# **üåç Understanding .NET Environment ‚Äì A Complete Guide**

.NET provides a flexible **runtime and development environment**, allowing developers to work with multiple SDKs, frameworks, and dependencies **without conflicts**.

This guide will cover:  
‚úî **What is .NET and How It Works**  
‚úî **.NET SDK vs. .NET Runtime**  
‚úî **.NET Execution Model**  
‚úî **Managing Multiple .NET Versions**  
‚úî **Dependency Management (NuGet, `.csproj`)**  
‚úî **.NET Global and Local Tools**  
‚úî **Configuring and Checking the .NET Environment**

---

## **1Ô∏è‚É£ What is .NET?**

.NET is a **cross-platform framework** developed by Microsoft that allows developers to build and run various types of applications, including:

- **Web Applications** ‚Üí (ASP.NET Core, Blazor)
- **Desktop Applications** ‚Üí (WPF, Windows Forms)
- **Mobile Applications** ‚Üí (Xamarin, .NET MAUI)
- **APIs & Microservices** ‚Üí (REST APIs using .NET Core)
- **Game Development** ‚Üí (Unity uses C# with .NET)
- **Cloud & DevOps Tools**

üìå **.NET allows you to write code once and run it on multiple operating systems (Windows, Linux, macOS).**

---

## **2Ô∏è‚É£ .NET SDK vs. .NET Runtime**

.NET is split into two parts:

| Component        | Description                                                                        | Needed for Development? | Needed for Running? |
| ---------------- | ---------------------------------------------------------------------------------- | ----------------------- | ------------------- |
| **.NET SDK**     | Includes **everything** needed for development (compilers, CLI tools, runtime).    | ‚úÖ Yes                  | ‚úÖ Yes              |
| **.NET Runtime** | Allows execution of compiled .NET applications but does **not include compilers**. | ‚ùå No                   | ‚úÖ Yes              |

### **üîπ How to Check Installed SDKs and Runtimes**

```sh
dotnet --list-sdks  # Lists installed SDK versions
dotnet --list-runtimes  # Lists installed .NET runtimes
```

If you only need to **run** a .NET application (not develop), you only need the **runtime**.  
If you want to **develop and compile** .NET apps, you need the **SDK**.

---

## **3Ô∏è‚É£ .NET Execution Model (How .NET Runs Code)**

When you write code in **C#**, it does not run directly on the operating system like an `.exe` file. Instead, .NET follows these steps:

### **üõ†Ô∏è Step 1: Write C# Code**

Example C# program:

```csharp
Console.WriteLine("Hello, .NET!");
```

### **üî® Step 2: Compilation (C# ‚Üí IL)**

Before execution, the C# code is compiled into an **Intermediate Language (IL)** using the .NET **C# compiler (Roslyn)**.

### **‚öôÔ∏è Step 3: Just-in-Time (JIT) Compilation**

At runtime, the **.NET Common Language Runtime (CLR)** converts IL into **machine code**, optimized for the operating system.

### **üìå Visual Representation of .NET Execution Model**

```mermaid
graph LR;
    A[C# Code] -->|Compile| B["Intermediate Language (IL)"];
    B -->|JIT Compile| C[Machine Code];
    C --> D[Execution on CPU];
```

This **multi-step execution** makes .NET **platform-independent**, as the IL can be run on different operating systems.

---

## **4Ô∏è‚É£ Managing Multiple .NET Versions**

### **üîπ How .NET Chooses the SDK Version**

When you run a `.NET` command, it looks for an SDK version in this order:

1Ô∏è‚É£ **Checks for `global.json`** ‚Üí Uses the specified SDK (if installed).  
2Ô∏è‚É£ **If no `global.json`, uses the latest installed SDK**.  
3Ô∏è‚É£ **If an SDK is missing, it fails or picks the closest available version**.

### **üîπ Installing a Specific .NET Version**

Download and install different .NET versions from:  
[.NET Download Page](https://dotnet.microsoft.com/en-us/download/dotnet)

To install a specific version:

```sh
dotnet new globaljson --sdk-version 6.0.100
```

To list installed versions:

```sh
dotnet --list-sdks
```

---

## **5Ô∏è‚É£ Dependency Management in .NET (How .NET Handles Packages (NuGet))**

When you install a NuGet package, it is **not installed globally** but **per project**.

Each .NET project manages dependencies using a `.csproj` file, which specifies:

- Required **packages**.
- Target **framework**.
- Other project settings.

Example `.csproj`:

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="Newtonsoft.Json" Version="13.0.1" />
    <PackageReference Include="Dapper" Version="2.0.90" />
  </ItemGroup>
</Project>
```

To **install a package**:

```sh
dotnet add package Newtonsoft.Json --version 13.0.1
```

To **restore dependencies**:

```sh
dotnet restore
```

To **list installed dependencies**:

```sh
dotnet list package
```

üìå **NuGet ensures project isolation by storing dependencies per project.**

### üîπ **Where Are NuGet Packages Stored?**

- **Project-Specific Packages:** Installed inside the project‚Äôs `obj/` and `bin/` folders.
- **NuGet Global Cache:** .NET **does cache** some packages globally at:
  - **Windows:** `C:\Users\YourUser\.nuget\packages`
  - **Linux/macOS:** `~/.nuget/packages`

üìå **Why?**  
When you install the same package **in another project**, .NET reuses it from the cache instead of downloading it again.

---

## **6Ô∏è‚É£ .NET Global and Local Tools**

### **üîπ What Are .NET Tools?**

.NET **Tools** are CLI commands that can be installed:

- **Globally** (available for all projects).
- **Locally** (installed per project).

### **üîπ Installing a Global Tool**

```sh
dotnet tool install --global dotnet-ef
```

This makes `dotnet-ef` available **system-wide**.

### **üîπ Installing a Local Tool (Project-Specific)**

```sh
dotnet tool install --local dotnet-ef
```

This installs `dotnet-ef` **only for the current project**.

To **list installed tools**:

```sh
dotnet tool list -g  # Global tools
dotnet tool list  # Local tools in the project
```

---

## **7Ô∏è‚É£ Checking and Configuring the .NET Environment**

### **üîπ Checking Installed SDKs and Runtimes**

```sh
dotnet --info
```

Output example:

```ini
.NET SDK:
 Version:   8.0.200
 Commit:    123456abc

.NET Runtimes:
 Microsoft.NETCore.App 6.0.10
 Microsoft.NETCore.App 8.0.2
```

### **üîπ Checking Which .NET Version a Project Uses**

Navigate to the project folder and run:

```sh
dotnet --version
```

If a **`global.json`** file is present, the output will match the version in `global.json`.

---

## **8Ô∏è‚É£ How .NET Handles Environments (Final Recap)**

| Feature                           | How .NET Handles It                                                      |
| --------------------------------- | ------------------------------------------------------------------------ |
| **.NET SDK & Runtime**            | Installed **globally** on the system.                                    |
| **Project-Specific .NET Version** | Defined using `global.json`, but the SDK **must be installed globally**. |
| **NuGet Packages**                | Installed **per project**, isolated from other projects.                 |
| **.NET Global Tools**             | Installed system-wide and available for all projects.                    |
| **.NET Local Tools**              | Installed inside the project, isolated from others.                      |

üìå **Final Understanding:**  
‚úî **.NET SDKs are always installed globally, but projects can specify which version to use via `global.json`**.  
‚úî **NuGet dependencies are isolated per project to prevent conflicts**.  
‚úî **.NET tools can be global or project-specific**.
