# üßπ Java Garbage Collection ‚Äì The Easy Way

## üîç What is Garbage Collection?

> üß† Java creates objects in **Heap Memory**.  
> üóëÔ∏è When an object is **no longer needed**, Java **automatically deletes it** to free memory.  
> This cleanup process is called **Garbage Collection (GC)**.

### üü° Example:

```java
Employee emp = new Employee(); // created
emp = null;  // no longer used, ready for GC
```

You don‚Äôt delete it manually like in C++ or manage disposal like `IDisposable` in C# ‚Äî Java handles it for you. üéØ

---

## üöÄ How GC Works?

### Two Main Steps:

1. **Mark**: Find out which objects are still being used (referenced).
2. **Sweep**: Remove all unused (unreferenced) objects from memory.

‚úÖ This is **automatic**.
‚ùå You can‚Äôt control when it runs.

---

## üîß Can I Force GC?

Not really. You can only **suggest**:

```java
System.gc();  // Request GC
```

But **JVM decides** when to actually do it.

---

## üßº How to Make an Object Eligible for GC?

1. **Set it to null**:

   ```java
   Employee emp = new Employee();
   emp = null; // now GC can clean it
   ```

2. **Use anonymous object**:

   ```java
   new Employee(); // used once, no reference
   ```

3. **Assign one object to another**:

   ```java
   Employee e1 = new Employee();
   Employee e2 = new Employee();
   e1 = e2;  // old e1 is gone ‚Äî GC can collect it
   ```

---

## üßπ GC Example

```java
public class Test {
    public void finalize() {
        System.out.println("Object is cleaned up");
    }

    public static void main(String[] args) {
        Test t = new Test();
        t = null;
        System.gc();  // Ask JVM to collect garbage
    }
}
```

üßæ Output might be:

```ini
Object is cleaned up
```

---

## üßπ Types of Garbage Collectors in Java

| GC Type            | Description                                | Best For                 |
| ------------------ | ------------------------------------------ | ------------------------ |
| üßµ **Serial GC**   | Single-threaded, stop-the-world            | Small apps               |
| ‚õìÔ∏è **Parallel GC** | Multi-threaded young GC                    | High-throughput apps     |
| ‚è≥ **CMS GC**      | Concurrent mark-sweep                      | Low-pause UI/server apps |
| üöÄ **G1 GC**       | Predictable pauses, concurrent, compacting | Modern default GC        |

> üí° **G1 GC is the default in Java 9+**.

---

## üßº `finalize()` Method (Deprecated in Java 18+)

Before destroying an object, the GC **may** call its `finalize()` method once.

```java
public class GCFinalizeDemo {
    public void finalize() {
        System.out.println("Finalize called. Object being garbage collected.");
    }

    public static void main(String[] args) {
        GCFinalizeDemo obj = new GCFinalizeDemo();
        obj = null;
        System.gc();
    }
}
```

üßæ Output (not guaranteed):

```ini
Finalize called. Object being garbage collected.
```

‚ö†Ô∏è Java discourages `finalize()` usage:

- It slows down GC
- No guarantee it will run
- Replaced by `AutoCloseable` or cleaner APIs

---

## üîç Java vs C# GC

| Feature        | Java GC                        | C# GC                            |
| -------------- | ------------------------------ | -------------------------------- |
| Manual free?   | ‚ùå Not allowed                 | ‚ùå Not allowed                   |
| `finalize()`?  | Yes (deprecated)               | `Finalize` via destructors       |
| Forcing GC?    | `System.gc()` (not guaranteed) | `GC.Collect()` (not recommended) |
| Deterministic? | ‚ùå No                          | ‚ùå No                            |
| Memory scope?  | JVM controlled                 | CLR controlled                   |

---

## üî• Real-World Analogy

üßπ Imagine Java heap as a hotel:

- Rooms = memory blocks
- Guests = objects
- Housekeeping (GC) checks for **empty rooms** (unreachable objects)
- Frees them for new guests (new objects)

---

## ‚úÖ Summary

| Concept           | Notes                                    |
| ----------------- | ---------------------------------------- |
| What is GC?       | Automatic cleanup of unreachable objects |
| Triggering GC     | `System.gc()` or by JVM internally       |
| Cannot be forced? | Yes ‚Äî JVM decides when                   |
| Eligible for GC?  | Null, reassigned, anonymous              |
| Finalize method?  | Deprecated; use `try-with-resources`     |
| G1 GC?            | Default modern GC (since Java 9+)        |

---

## üß† Best Practices

‚úÖ Make objects unreachable early
‚úÖ Avoid using `finalize()`
‚úÖ Use `try-with-resources` for cleanup
‚úÖ Tune GC with JVM options for large-scale systems (`-Xms`, `-Xmx`, `-XX:+UseG1GC`, etc.)
