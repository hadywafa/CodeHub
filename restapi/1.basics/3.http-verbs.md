# âš¡ HTTP Basics: Methods, Headers, Status Codes

## ğŸ”¨ HTTP Methods (a.k.a. â€œverbsâ€)

Think of HTTP methods like **actions** you tell the server to perform.
In REST, they map directly to **CRUD operations** (Create, Read, Update, Delete).

| Method     | Meaning    | Typical REST Use | Example                              |
| ---------- | ---------- | ---------------- | ------------------------------------ |
| **GET**    | Fetch data | Read resource(s) | `GET /users/1`                       |
| **POST**   | Create new | Create resource  | `POST /users` with JSON body         |
| **PUT**    | Replace    | Full update      | `PUT /users/1` (replace user)        |
| **PATCH**  | Modify     | Partial update   | `PATCH /users/1` (update only email) |
| **DELETE** | Remove     | Delete resource  | `DELETE /users/1`                    |

ğŸ’¡ Memory trick:

- **GET** = bring it
- **POST** = add it
- **PUT** = replace it
- **PATCH** = tweak it
- **DELETE** = remove it

---

## ğŸ“¦ HTTP Headers

Headers are like the **metadata** of a request/response â€” little notes attached to help servers and clients understand the message.

### ğŸ”¹ Common Request Headers

- `Accept: application/json` â†’ tell server you want JSON back.
- `Content-Type: application/json` â†’ what format your body is in.
- `Authorization: Bearer <token>` â†’ auth token for security.
- `User-Agent: Mozilla/5.0` â†’ info about client making request.

### ğŸ”¹ Common Response Headers

- `Content-Type: application/json` â†’ response format.
- `Cache-Control: no-cache` â†’ whether response can be cached.
- `ETag: "abc123"` â†’ version identifier for resource (helps caching).
- `Location: /users/2` â†’ often used in `201 Created` responses to point to the new resource.

---

## ğŸš¦ HTTP Status Codes

Status codes tell the **outcome** of a request. They follow the pattern:

- **1xx** â†’ Informational
- **2xx** â†’ Success
- **3xx** â†’ Redirection
- **4xx** â†’ Client error
- **5xx** â†’ Server error

### ğŸ”¹ **Most Important Ones**

#### âœ… **Success (2xx)**

- **200 OK** â†’ request succeeded.
- **201 Created** â†’ resource created (usually with `POST`).
- **202 async accepted** â†’ request is added to a queue and will be handled later..
- **204 No Content** â†’ success, but nothing to return (e.g., `DELETE`).

#### ğŸ” **Redirection & Caching (3xx)**

These status codes donâ€™t mean failure â€” they guide the client to take **another step**. Think of them as polite nudges.

**ğŸ§­ Permanent Redirects:**

- **301 Moved Permanently**  
  â†’ The resource has moved to a new URL **forever**.  
  â†’ Clients (and search engines) should **update their links**.  
  â†’ Example: `GET /old-page` â†’ `301` â†’ `Location: /new-page`

- **308 Permanent Redirect**  
  â†’ Same as 301, but **preserves the HTTP method**.  
  â†’ If you `POST /old`, the client will `POST /new` â€” not switch to `GET`.  
  â†’ Useful for APIs where method matters.

**ğŸ”„ Temporary Redirects:**

- **302 Found**  
  â†’ Resource is temporarily elsewhere.  
  â†’ Clients should **not update bookmarks**.  
  â†’ Often used for login flows or short-lived redirects.

- **303 See Other**  
  â†’ Tells the client: â€œGo fetch the result using `GET` from this other URI.â€  
  â†’ Common after a `POST` that triggers a redirect to a result page.

ğŸ§  **Caching & Efficiency:**

- **304 Not Modified**  
  â†’ â€œYou already have the latest version â€” no need to download again.â€  
  â†’ Used with headers like `If-Modified-Since` or `ETag`.  
  â†’ Saves bandwidth and speeds up client-side performance.

---

#### âŒ **Client Errors (4xx)**

- **400 Bad Request** â†’ malformed or invalid input (e.g., missing fields, bad JSON).
- **401 Unauthorized** â†’ authentication required or invalid token (means â€œunauthenticatedâ€).
- **403 Forbidden** â†’ authenticated but not allowed to access the resource (RBAC failure).
- **404 Not Found** â†’ resource doesnâ€™t exist at the requested URI.
- **405 Method Not Allowed** â†’ HTTP verb not supported for this endpoint (e.g., `PUT` on a read-only route).
- **409 Conflict** â†’ request conflicts with current state (e.g., duplicate entry (**idempotency**), version mismatch).
- **415 Unsupported Media Type** â†’ wrong `Content-Type` header (e.g., expecting `application/json`).
- **422 Unprocessable Entity** â†’ semantic validation failed (e.g., valid JSON but invalid business logic).
- **429 Too Many Requests** â†’ rate limit exceeded; client should back off or retry later.

---

#### ğŸ’€ **Server Errors (5xx)**

- **500 Internal Server Error** â†’ generic crash.
- **502 Bad Gateway** â†’ upstream service failed.
- **503 Service Unavailable** â†’ server down or overloaded.
- **504 Gateway Timeout** â†’ server didnâ€™t respond in time.

---

## ğŸ–¼ï¸ Example REST Interaction

### Request

```http
POST /users HTTP/1.1
Host: api.example.com
Content-Type: application/json
Authorization: Bearer abc123
Accept: application/json

{
  "name": "Ali",
  "email": "ali@example.com"
}
```

### Response

```http
HTTP/1.1 201 Created
Content-Type: application/json
Location: /users/42

{
  "id": 42,
  "name": "Ali",
  "email": "ali@example.com"
}
```

ğŸ‘‰ Notice:

- **Method** = `POST` (create).
- **Headers** tell format + auth.
- **Status code** = `201 Created`.
- **Location header** points to the new user.

---

## ğŸ“Š Visual Flow

<div align="center">

```mermaid
sequenceDiagram
    participant Client
    participant Server

    Client->>Server: POST /users { name:"Ali" }
    Server-->>Client: 201 Created + Location: /users/42
    Client->>Server: GET /users/42
    Server-->>Client: 200 OK { "id":42,"name":"Ali" }
```

</div>

---

## ğŸ¯ Recap

- **Methods** = actions (GET, POST, PUT, PATCH, DELETE).
- **Headers** = metadata (content type, auth, caching).
- **Status codes** = outcome (2xx success, 4xx client errors, 5xx server errors).

Together, they form the **language of REST APIs**.
