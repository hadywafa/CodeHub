# üëÜüèª Interactive API docs

‚ÄúInteractive API docs‚Äù = a web page where devs can **read** the contract _and_ **send real requests** (‚ÄúTry it out‚Äù) without leaving the page.

---

## ‚öôÔ∏è What makes docs interactive?

1. **Live OpenAPI** (source of truth)
2. A **renderer** that shows endpoints + schemas + examples
3. A built-in **API console** (inputs, auth, send request, see response)
4. **Environment & auth** controls (choose server, paste token)
5. Optional **mock mode** (hit a mock instead of prod)

---

## üß∞ Popular options (what to use when)

| Tool                         | Interactivity        | Best for               | Notes                                                 |
| ---------------------------- | -------------------- | ---------------------- | ----------------------------------------------------- |
| **Swagger UI**               | ‚úÖ ‚ÄúTry it out‚Äù      | Fast setup, OSS        | Minimal theming, ubiquitous                           |
| **Redoc**                    | (Reader only)        | Beautiful read-mode    | Pair with gateway/proxy or use **Redocly** for Try-it |
| **Redocly (Portal)**         | ‚úÖ                   | Enterprises            | Versioning, RBAC, search, CI rules                    |
| **Stoplight Elements**       | ‚úÖ                   | Nice UX + theming      | Easy embed in any site                                |
| **Postman Public Workspace** | ‚úÖ                   | Teams on Postman       | Share collection, mock servers, code samples          |
| **Docusaurus + plugin**      | ‚úÖ (via embedded UI) | Full product docs site | Put Swagger UI/Elements inside your docs              |

> Quick pick: start with **Swagger UI**. If you need a polished portal later, move to **Redocly** or **Stoplight**.

---

## üöÄ Make Swagger UI interactive (the 80/20)

**index.html:**

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>API Docs</title>
  </head>
  <body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js"></script>
    <script>
      SwaggerUIBundle({
        url: "/openapi.yaml",
        dom_id: "#swagger-ui",
        deepLinking: true,
        tryItOutEnabled: true,
        displayRequestDuration: true,
        // Enable server selector if you have multiple servers in your spec
        // withCredentials if you rely on cookies
      });
    </script>
  </body>
</html>
```

**OpenAPI must include auth + servers** to enable ‚ÄúAuthorize‚Äù and server chooser:

```yaml
openapi: 3.0.3
servers:
  - url: https://api.example.com
    description: Production
  - url: https://staging-api.example.com
    description: Staging
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
security:
  - BearerAuth: []
```

Now the UI shows:

- **Authorize** button (paste JWT/API key)
- **Try it out** on every operation
- **Server** dropdown to switch environments

---

## üéØ Redoc / Redocly: polished + enterprise

- **Redoc** (OSS) gives an amazing read experience (schema browsing, search).
- To get ‚ÄúTry it out‚Äù, pair with:

  - **Redocly API Registry/Portal** (hosted) _or_
  - A **proxy console** that forwards requests (e.g., Stoplight Prism mock, or your small backend).

**Minimal Redoc (reader):**

```html
<redoc spec-url="/openapi.yaml"></redoc>
<script src="https://unpkg.com/redoc/bundles/redoc.standalone.js"></script>
```

---

## üéõÔ∏è Stoplight Elements: modern, embeddable console

```html
<link rel="stylesheet" href="https://unpkg.com/@stoplight/elements/styles.min.css" />
<div id="app"></div>
<script type="module">
  import { API } from "https://cdn.skypack.dev/@stoplight/elements";
  import React from "https://esm.sh/react";
  import ReactDOM from "https://esm.sh/react-dom";
  ReactDOM.render(
    React.createElement(API, { apiDescriptionUrl: "/openapi.yaml", layout: "sidebar" }),
    document.getElementById("app")
  );
</script>
```

- Includes **Try it**, code samples, dark mode, theming via CSS.

---

## üîå Postman Public Workspace (alt path)

- Import your **OpenAPI** ‚Üí Postman auto-builds a **collection**.
- Publish as a **Public Workspace** ‚Üí readers can fork, try requests, see code snippets, and even hit **mock servers** Postman hosts.
- Great for onboarding external devs quickly.

---

## üß™ Requirements inside your OpenAPI (for great interactivity)

1. **Complete responses**

   ```yaml
   responses:
   "200":
     description: OK
     content:
     application/json:
       schema: { $ref: "#/components/schemas/User" }
       examples:
       ok: { value: { id: 42, name: "Ali" } }
   ```

2. **Request bodies with examples**

   ```yaml
   requestBody:
   required: true
   content:
     application/json:
     schema: { $ref: "#/components/schemas/UserCreate" }
     examples:
       sample: { value: { name: "Ali", email: "ali@example.com" } }
   ```

3. **Reusable parameters** (pagination/sorting)

   ```yaml
   components:
   parameters:
     Page: { in: query, name: page, schema: { type: integer, default: 1 } }
   ```

4. **Auth flows** (so ‚ÄúAuthorize‚Äù works)

   ```yaml
   components:
   securitySchemes:
     ApiKeyAuth:
     type: apiKey
     in: header
     name: X-API-Key
   ```

5. **CORS + servers** (so browser can call your API)

- In the **API**, enable CORS for the docs origin (e.g., `docs.example.com`).
- In the **spec**, list all `servers` you want selectable.

---

## üßØ Security & safety (very important)

- **Never point interactive docs at production** without thinking:

  - Prefer a **sandbox/staging** server in `servers`.
  - Add **rate limiting** for doc-origin traffic.

- **CORS**: allow `Origin: <docs host>` with correct `Access-Control-Allow-*` headers.
- **Auth**: require test tokens; expire them; scope to ‚Äúread-only‚Äù if possible.
- **Data protection**: redact PII from examples; use fake data.
- **Dangerous operations** (DELETE, money moves):

  - Hide in prod docs or require elevated scopes.

---

## üß™ Mock mode for safe ‚ÄúTry it‚Äù

For early docs or demos:

- Spin up a **mock server** from your OpenAPI examples:

  - **Prism** (Stoplight) or **Postman mocks**

- Add it as a `server` in the spec:

```yaml
servers:
  - url: https://mock.example.com
    description: Mock (Prism)
  - url: https://staging-api.example.com
    description: Staging
```

Now ‚ÄúTry it‚Äù hits the mock by default and returns your documented examples.

---

## üîÅ CI/CD: keep docs always correct

- **Lint** the spec (Spectral) on every PR.
- **Preview**: deploy Swagger UI/Redoc to a preview URL per PR.
- **Publish** on merge to `main` (Netlify/Vercel/GitHub Pages/S3).
- Optionally **diff** specs to auto-generate a **changelog** (breaking vs non-breaking).

---

## ‚úÖ Checklist (before you ship interactive docs)

- [ ] Spec has **servers**, **securitySchemes**, **examples**, **errors** (problem+json).
- [ ] Docs host can reach API (CORS configured).
- [ ] A **sandbox** server is available and selected by default.
- [ ] Rate limits / quotas for doc-origin traffic.
- [ ] Dangerous ops gated or hidden.
- [ ] CI lints & deploys the docs automatically.
