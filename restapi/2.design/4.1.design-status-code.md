# ðŸš¨ Error Handling & Status Codes

## ðŸ§© Why Error Handling Matters

Imagine using an API that only ever replies:

```json
{ "error": "something went wrong" }
```

Youâ€™d cry. ðŸ˜­

Good error handling should tell you:

- **What happened** (status code).
- **Why it happened** (message/code).
- **How to fix it** (hint/details).

---

## ðŸ“Œ HTTP Status Code Categories

| Code Range | Meaning         | Example                            |
| ---------- | --------------- | ---------------------------------- |
| **2xx**    | âœ… Success      | `200 OK`, `201 Created`            |
| **3xx**    | ðŸ”€ Redirection  | `301 Moved Permanently`            |
| **4xx**    | âŒ Client Error | `400 Bad Request`, `404 Not Found` |
| **5xx**    | ðŸ’¥ Server Error | `500 Internal Server Error`        |

---

## ðŸ” Common Status Codes for REST APIs

### âœ… Success

- **200 OK** â†’ standard success.
- **201 Created** â†’ new resource created.
- **204 No Content** â†’ success but nothing to return (often after DELETE).

---

### âŒ Client Errors (4xx)

- **400 Bad Request** â†’ invalid input.
- **401 Unauthorized** â†’ no valid auth credentials.
- **403 Forbidden** â†’ authenticated, but not allowed.
- **404 Not Found** â†’ resource doesnâ€™t exist.
- **409 Conflict** â†’ duplicate or conflicting state (e.g., creating same username).
- **422 Unprocessable Entity** â†’ validation failed (common in APIs).

---

### ðŸ’¥ Server Errors (5xx)

- **500 Internal Server Error** â†’ generic server crash.
- **502 Bad Gateway** â†’ upstream service error.
- **503 Service Unavailable** â†’ server down/overloaded.
- **504 Gateway Timeout** â†’ server didnâ€™t respond in time.

---

## ðŸ“¦ Standard Error Response Structure

Most modern APIs follow a **consistent JSON structure** for errors:

```json
{
  "error": {
    "code": "USER_NOT_FOUND",
    "message": "User with ID 42 does not exist.",
    "details": {
      "id": 42,
      "resource": "users"
    },
    "traceId": "abc123"
  }
}
```

### Key Parts:

- `code`: machine-friendly error identifier.
- `message`: human-readable explanation.
- `details`: extra info (optional).
- `traceId`: helps debug logs/tracing.

---

## ðŸ–¼ï¸ Error Handling Flow

```mermaid
sequenceDiagram
    participant Client
    participant Server
    Client->>Server: GET /users/999
    Server->>Server: Check DB â†’ No user found
    Server-->>Client: 404 Not Found + JSON error body
    Client->>Client: Show "User not found"
```

---

## âš¡ Pro Tips

- âœ… Always return **meaningful status codes** (donâ€™t use `200` with error messages).
- âœ… Use **422** for validation errors (clearer than `400`).
- âœ… Keep **error codes stable** across versions (clients depend on them).
- âœ… Include a **trace ID** to debug production issues.
- âœ… Donâ€™t leak sensitive info (like stack traces) in production.

---

## âœ… Recap

- Use **2xx** for success, **4xx** for client mistakes, **5xx** for server crashes.
- Provide **structured JSON error responses**.
- Make error messages **developer-friendly** (actionable, not vague).
- Always be **consistent** in your API error format.

> ðŸ’¡ A good API makes errors as helpful as success responses â€” thatâ€™s what developers love.
